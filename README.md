# Amount Platform PoC

This repository demonstrates a couple of architectural concepts relevant to the creation of a multi-tenant SaaS API application using a modular monolith approach.

## Installation

Ruby 3.0 or newer is required.

Download the repository and run `bundle install`.

Run `db:seed` to insert example data for tenants/shards in the Platform engine and accounts/customer in the User engine.

Run `rails s` to start the development server at localhost:3000.

## Auto-generated API documentation

[Swagger.io](https://editor.swagger.io/) can be pointed to localhost:3000/swagger_doc to view automated API documentation generated by the Grape API definitions in each engine.

## Automated package dependencies

Each engine defines a package.yml file using the [Packwerk gem](https://github.com/Shopify/packwerk) in its root folder which defines the allowed dependencies for the engine.

Refer to the gem's [usage instructions](https://github.com/Shopify/packwerk/blob/main/USAGE.md) for more information on checking dependencies.

## Creating new engines

New engines can be generated by running `rake generate_engine name=engine_name`

The rake task [borrows a script](https://www.rootstrap.com/blog/building-an-engine-modularized-api-in-rails/) from Shopify's engineering team.
